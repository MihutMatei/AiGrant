{% extends "base.html" %}

{% block title %}Welcome · aiGrant{% endblock %}

{% block content %}
<style>
  /* Right column widget styling */
  .eu-grants-widget {
    background: linear-gradient(to bottom right, #433dc2, #000000); /* diagonal gradient */
    border-radius: 1rem;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    max-height: 500px;
    overflow-y: auto;
    flex-grow: 1;
  }

  /* Individual grant items */
  .eu-grant-item {
    background: linear-gradient(to bottom right, #3b35b0, #000000); /* diagonal gradient */
    border-radius: 0.75rem;
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
    color: #ffffff;
  }

  .eu-grant-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    background: linear-gradient(to bottom right, #362fa3, #000000); /* diagonal hover gradient */
  }

  .eu-grant-item .fw-semibold {
    font-size: 1rem;
    margin-bottom: 0.25rem;
  }

  .eu-grant-item .small {
    font-size: 0.8rem;
    color: #d0d6f5;
  }

  .eu-grant-item a {
    margin-top: 0.5rem;
    display: inline-block;
    font-size: 0.8rem;
    color: #ffeaa7;
    text-decoration: none;
  }

  .eu-grant-item a:hover {
    text-decoration: underline;
  }

  /* Scrollbar styling */
  .eu-grants-widget::-webkit-scrollbar {
    width: 6px;
  }
  .eu-grants-widget::-webkit-scrollbar-thumb {
    background-color: rgba(0,0,0,0.2);
    border-radius: 3px;
  }

  /* Optional: Equal height for both columns */
  .row-equal-height {
    display: flex;
    flex-wrap: wrap;
  }
  .row-equal-height > [class*="col-"] {
    display: flex;
    flex-direction: column;
  }
</style>
<style>
  .try-app-btn {
    position: relative;
    overflow: hidden;
    border: none;
    background: linear-gradient(135deg, #5e56f0, #4338ca);
    box-shadow: 0 4px 15px rgba(67, 56, 202, 0.3);
    text-decoration: none !important;   /* ← ADD THIS */
  }

  /* Hover: lift + glow + icon move */
  .try-app-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(67, 56, 202, 0.4);
    background: linear-gradient(135deg, #6c63ff, #4c46c4);
    text-decoration: none !important;   /* ← ADD THIS TOO */
  }

  .try-app-btn:hover i {
    transform: translateX(4px);
  }

  /* Optional: subtle shine animation */
  .try-app-btn::before {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.2), transparent);
    transition: 0.7s;
  }

  .try-app-btn:hover::before {
    left: 100%;
  }

  /* Bullet-proof: remove underline from any child (span, etc.) */
  .try-app-btn span,
  .try-app-btn:hover span {
    text-decoration: none !important;
  }
</style>

<!-- MAIN ROW -->
<div class="row g-4 row-equal-height" style="align-items: stretch;">

  <!-- LEFT COLUMN -->
  <div class="col-lg-7 d-flex flex-column" id="left-column">

    <div class="flex-grow-1">
      <div class="mb-3 d-flex gap-2 align-items-center">
        <span class="badge-soft">
          <i class="bi bi-lightning-charge-fill me-1"></i>
          AI-assisted funding intelligence
        </span>
      </div>

      <h1 class="fw-semibold mb-3" style="letter-spacing: -0.03em;">
        Discover <span style="color:#a5b4fc;">startup funding opportunities</span>
        aligned with your profile.
      </h1>

      <p class="text-muted-soft mb-4" style="max-width: 520px;">
        aiGrant streamlines the identification of grants, accelerators,
        and investment programs by intelligently matching your startup’s
        characteristics with verified funding opportunities.
      </p>

      <!-- INFO BLOCKS -->
      <div class="row mt-4 g-4">
        <div class="col-md-6">
          <div class="fw-semibold">Subscription-only access</div>
          <div class="text-muted-soft small">
            Gain full access to the verified funding database<br>
            exclusively with a subscription.
          </div>
        </div>
        <div class="col-md-6">
          <div class="fw-semibold">Secure, private data</div>
          <div class="text-muted-soft small">
            Grant and investor listings are not publicly accessible<br>
            and are available only to registered users.
          </div>
        </div>
        <div class="col-md-6">
          <div class="fw-semibold">Save time and make informed decisions</div>
          <div class="text-muted-soft small">
            Quickly identify the most relevant funding<br>
            opportunities for your startup.
          </div>
        </div>
        <div class="col-md-6">
          <div class="fw-semibold">Demo workspace</div>
          <div class="text-muted-soft small">
            Explore the platform using realistic sample data<br>
            in a safe environment.
          </div>
        </div>
      </div>
    </div>

    <!-- TRY OUR APP BUTTON -->

    {% if not user %}
      <a href="{{ url_for('demo') }}"
        class="btn btn-primary d-inline-flex align-items-center gap-2 mt-4 text-nowrap try-app-btn"
        style="
          font-size: 1.2rem;
          padding: 1.0rem 3.5rem !important;
          width: fit-content !important;
          display: inline-flex !important;
          transition: all 0.25s ease;
        ">
        <i class="bi bi-box-arrow-right"></i>
        <span>Try our app</span>
      </a>
    {% endif %}

  </div> <!-- END LEFT COLUMN -->

{# --------------------------------------------------- #}
{#  RIGHT COLUMN – switches automatically               #}
{# --------------------------------------------------- #}

{% if user %}
  {# ---------- LOGGED-IN USER: Company snapshot ---------- #}
  <div class="col-lg-5">
    <div class="glass-card p-4 p-md-5">
      <h5 class="mb-3 d-flex align-items-center gap-2">
        <span class="d-inline-flex align-items-center justify-content-center rounded-circle"
              style="width: 32px; height: 32px; background: var(--primary-soft);">
          <i class="bi bi-buildings"></i>
        </span>
        Company details
      </h5>

      <ul class="list-unstyled mb-4">
        <li class="d-flex justify-content-between mb-2">
          <span class="text-muted-soft">Company name</span>
          <span>{{ user.name }}</span>
        </li>
        <li class="d-flex justify-content-between mb-2">
          <span class="text-muted-soft">CUI</span>
          <span>{{ user.cui or "—" }}</span>
        </li>
      </ul>

      <div class="border-top border-secondary pt-3 d-flex justify-content-between align-items-center gap-3">
        <span class="text-muted-soft small">
          Production access includes real-time feeds.
        </span>
        <a href="{{ url_for('account') }}" class="btn btn-outline-light btn-sm">
          Go to account
        </a>
      </div>
    </div>
  </div>

{% else %}
  {# ---------- ANONYMOUS USER: Public opportunities ---------- #}
  <div class="col-lg-5 ms-lg-auto d-flex flex-column">
    <h5 class="fw-semibold mb-3 text-white">Latest opportunities</h5>

    <div class="eu-grants-widget">
      {% if grants %}
        {% for grant in grants %}
          <div class="eu-grant-item mb-3">
            <div class="fw-semibold">{{ grant.title }}</div>
            <div class="small text-muted-soft">Published: {{ grant.pubDate }}</div>
          </div>
        {% endfor %}
      {% else %}
        <div class="text-center text-red py-4">No grants available.</div>
      {% endif %}
    </div>
  </div>
{% endif %}


</div> <!-- END ROW -->
{% endblock %}